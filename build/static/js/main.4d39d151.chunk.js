(this["webpackJsonparweave-permafeed-hub-react"]=this["webpackJsonparweave-permafeed-hub-react"]||[]).push([[0],{120:function(e,t,a){},215:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(74),l=a.n(s);a(84),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=a(13),i=a(18),o=a(20),m=a(19),u=a(21),d=a(2),p=a(1),f=a.n(p),h=a(4),v=a(75),E=a.n(v).a.init({host:"arweave.net",port:443,protocol:"https"}),g=function(){return(new Date).getTime()},b=new function e(){var t=this;Object(c.a)(this,e),this.getWalletAddress=function(e){return E.wallets.jwkToAddress(e)},this.getWalletAmount=function(e){return E.wallets.getBalance(e)},this.convertToAr=function(e){return E.ar.winstonToAr(e)},this.postFeed=function(){var e=Object(h.a)(f.a.mark((function e(t,a){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object.assign(t,{time:g(),type:"feed"}),e.next=3,E.createTransaction({data:JSON.stringify(t)},a);case 3:return(n=e.sent).addTag("Transaction-Type",t.type),n.addTag("Time",t.time),n.addTag("App-Name","permafeed-hub"),e.next=9,E.transactions.sign(n,a);case 9:return e.next=11,E.transactions.post(n);case 11:return r=e.sent,e.abrupt("return",r);case 13:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.commentFeed=function(){var e=Object(h.a)(f.a.mark((function e(t,a,n){var r,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object.assign(t,{time:g(),type:"comment"}),e.next=3,E.createTransaction({data:JSON.stringify(t)},a);case 3:return(r=e.sent).addTag("Transaction-Type",t.type),r.addTag("Time",t.time),r.addTag("Comment-For",n),r.addTag("App-Name","permafeed-hub"),e.next=10,E.transactions.sign(r,a);case 10:return e.next=12,E.transactions.post(r);case 12:return s=e.sent,e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),this.getCommentByFeedId=function(){var e=Object(h.a)(f.a.mark((function e(t){var a,n,r,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={op:"and",expr1:{op:"and",expr1:{op:"equals",expr1:"Transaction-Type",expr2:"comment"},expr2:{op:"equals",expr1:"Comment-For",expr2:t}},expr2:{op:"equals",expr1:"App-Name",expr2:"permafeed-hub"}},e.next=3,E.arql(a);case 3:if(0!==(n=e.sent).length){e.next=6;break}return e.abrupt("return",[]);case 6:return e.next=8,Promise.all(n.map((function(e){return E.transactions.get(e)})));case 8:return r=e.sent,e.next=11,Promise.all(r.map(function(){var e=Object(h.a)(f.a.mark((function e(t,a){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=JSON.parse(t.get("data",{decode:!0,string:!0})),e.t0=Object,e.t1=r,e.next=5,E.wallets.ownerToAddress(t.get("owner"));case 5:return e.t2=e.sent,e.t3=n[a],e.t4={owner:e.t2,txid:e.t3},e.t0.assign.call(e.t0,e.t1,e.t4),e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()));case 11:return s=e.sent,e.abrupt("return",s);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getAllFeeds=Object(h.a)(f.a.mark((function e(){var a,n,r,s,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={op:"and",expr1:{op:"equals",expr1:"Transaction-Type",expr2:"feed"},expr2:{op:"equals",expr1:"App-Name",expr2:"permafeed-hub"}},e.next=3,E.arql(a);case 3:if(0!==(n=e.sent).length){e.next=6;break}return e.abrupt("return",[]);case 6:return e.next=8,Promise.all(n.map((function(e){return E.transactions.get(e)})));case 8:return r=e.sent,e.next=11,Promise.all(r.map(function(){var e=Object(h.a)(f.a.mark((function e(a,r){var s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=JSON.parse(a.get("data",{decode:!0,string:!0})),e.t0=Object,e.t1=s,e.t2=n[r],e.next=6,t.getTipByTxId(n[r]);case 6:return e.t3=e.sent,e.next=9,t.getCommentByFeedId(n[r]);case 9:return e.t4=e.sent,e.t5={txid:e.t2,tips:e.t3,comments:e.t4},e.t0.assign.call(e.t0,e.t1,e.t5),Object.assign(s,{tipAmount:0===s.tips.length?0:s.tips.map((function(e){return Number.parseInt(e.amount)})).reduce((function(e,t){return e+t}))}),e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()));case 11:return s=e.sent,(l=s.sort((function(e,t){return t.tipAmount-e.tipAmount}))).forEach((function(e,t){return Object.assign(e,{rank:t+1}),e})),e.abrupt("return",l);case 15:case"end":return e.stop()}}),e)}))),this.getYourFeeds=function(){var e=Object(h.a)(f.a.mark((function e(a){var n,r,s,l,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={op:"and",expr1:{op:"and",expr1:{op:"equals",expr1:"Transaction-Type",expr2:"feed"},expr2:{op:"equals",expr1:"from",expr2:a}},expr2:{op:"equals",expr1:"App-Name",expr2:"permafeed-hub"}},e.next=3,E.arql(n);case 3:if(0!==(r=e.sent).length){e.next=6;break}return e.abrupt("return",[]);case 6:return e.next=8,Promise.all(r.map((function(e){return E.transactions.get(e)})));case 8:return s=e.sent,e.next=11,Promise.all(s.map(function(){var e=Object(h.a)(f.a.mark((function e(a,n){var s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=JSON.parse(a.get("data",{decode:!0,string:!0})),e.t0=Object,e.t1=s,e.t2=r[n],e.next=6,t.getTipByTxId(r[n]);case 6:return e.t3=e.sent,e.next=9,t.getCommentByFeedId(r[n]);case 9:return e.t4=e.sent,e.t5={txid:e.t2,tips:e.t3,comments:e.t4},e.t0.assign.call(e.t0,e.t1,e.t5),Object.assign(s,{tipAmount:0===s.tips.length?0:s.tips.map((function(e){return Number.parseInt(e.amount)})).reduce((function(e,t){return e+t}))}),e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()));case 11:return l=e.sent,(c=l.sort((function(e,t){return t.tipAmount-e.tipAmount}))).forEach((function(e,t){return Object.assign(e,{rank:t+1}),e})),console.log(c),e.abrupt("return",c);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.sendTip=function(){var e=Object(h.a)(f.a.mark((function e(t,a,n,r){var s,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(75*E.ar.arToWinston(a)/100,25*E.ar.arToWinston(a)/100),e.next=3,E.createTransaction({target:t,quantity:E.ar.arToWinston(75*a/100),reward:E.ar.arToWinston(25*a/100)},n);case 3:return(s=e.sent).addTag("Transaction-Type","Tip"),s.addTag("Tip-For",r),s.addTag("Time",g()),s.addTag("App-Name","permafeed-hub"),e.next=10,E.transactions.sign(s,n);case 10:return e.next=12,E.transactions.post(s);case 12:return l=e.sent,e.abrupt("return",l);case 14:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),this.runGraphql=function(){var e=Object(h.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.api.post("/arql",{query:t});case 2:a=e.sent,console.log(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.runQuery=function(){var e=Object(h.a)(f.a.mark((function e(t){var a,n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.arql(t);case 2:if(0!==(a=e.sent).length){e.next=5;break}return e.abrupt("return",[]);case 5:return e.next=7,Promise.all(a.map((function(e){return E.transactions.get(e)})));case 7:return n=e.sent,e.next=10,Promise.all(n.map(function(){var e=Object(h.a)(f.a.mark((function e(t,a){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.parse(t.get("data",{decode:!0,string:!0})),e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()));case 10:return r=e.sent,e.abrupt("return",r);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getTipByTxId=function(){var e=Object(h.a)(f.a.mark((function e(a){var n,r,s,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={op:"and",expr1:{op:"and",expr1:{op:"equals",expr1:"Transaction-Type",expr2:"Tip"},expr2:{op:"equals",expr1:"Tip-For",expr2:a}},expr2:{op:"equals",expr1:"App-Name",expr2:"permafeed-hub"}},e.next=3,E.arql(n);case 3:if(0!==(r=e.sent).length){e.next=6;break}return e.abrupt("return",[]);case 6:return e.next=8,Promise.all(r.map((function(e){return E.transactions.get(e)})));case 8:return s=e.sent,e.next=11,Promise.all(s.map(function(){var e=Object(h.a)(f.a.mark((function e(a,n){var s,l,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchBlockHash(r[n]);case 2:return s=e.sent,e.next=5,t.fetchBlockDetails(s.block_indep_hash);case 5:return l=e.sent,e.next=8,E.wallets.ownerToAddress(a.get("owner"));case 8:return e.t0=e.sent,e.t1=a.get("quantity"),e.t2=r[n],e.t3=l.timestamp,c={owner:e.t0,amount:e.t1,txid:e.t2,time:e.t3},e.abrupt("return",c);case 14:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()));case 11:return l=e.sent,e.abrupt("return",l);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getFeedDetails=function(){var e=Object(h.a)(f.a.mark((function e(a,n,r){var s,l,c,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={op:"and",expr1:{op:"equals",expr1:"from",expr2:r},expr2:{op:"equals",expr1:a,expr2:n}},e.next=3,E.arql(s);case 3:if(0!==(l=e.sent).length){e.next=6;break}return e.abrupt("return",[]);case 6:return e.next=8,Promise.all(l.map((function(e){return E.transactions.get(e)})));case 8:return c=e.sent,e.next=11,Promise.all(c.map(function(){var e=Object(h.a)(f.a.mark((function e(a,n){var r,s,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=JSON.parse(a.get("data",{decode:!0,string:!0})),e.next=3,t.fetchBlockHash(l[n]);case 3:return s=e.sent,e.next=6,t.fetchBlockDetails(s.block_indep_hash);case 6:return c=e.sent,Object.assign(r,{txid:l[n],timestamp:c.timestamp}),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()));case 11:return i=e.sent,e.abrupt("return",i);case 13:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),this.fetchBlockHash=function(){var e=Object(h.a)(f.a.mark((function e(t){var a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://arweave.net/tx/".concat(t,"/status"));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.fetchBlockDetails=function(){var e=Object(h.a)(f.a.mark((function e(t){var a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://arweave.net/block/hash/".concat(t));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},N=function(e){var t=r.a.useState(""),a=Object(d.a)(t,2),n=a[0],s=a[1],l=r.a.useState(),c=Object(d.a)(l,2),i=c[0],o=c[1],m=r.a.useState(""),u=Object(d.a)(m,2),p=u[0],v=u[1],E=function(e){var t=new FileReader;t.onloadend=g,t.readAsText(e)},g=function(){var e=Object(h.a)(f.a.mark((function e(t){var a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.parse(t.target.result),e.next=3,b.getWalletAddress(a);case 3:n=e.sent,o(a),v(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"modal "+(e.openLogin?"is-active":null)},r.a.createElement("div",{className:"modal-background"}),r.a.createElement("div",{className:"modal-content"},r.a.createElement("header",{className:"modal-card-head"},r.a.createElement("p",{className:"modal-card-title"},"Log in with Arweave wallet"),r.a.createElement("button",{className:"delete","aria-label":"close",onClick:e.closeLoginModal})),r.a.createElement("section",{className:"modal-card-body"},r.a.createElement("div",{className:"file has-name is-right is-fullwidth"},r.a.createElement("label",{className:"file-label"},r.a.createElement("input",{className:"file-input",type:"file",name:"wallet",onChange:function(e){E(e.target.files[0]),s(e.target.files[0].name)}}),r.a.createElement("span",{className:"file-cta"},r.a.createElement("span",{className:"file-icon"},r.a.createElement("i",{className:"fas fa-upload"})),r.a.createElement("span",{className:"file-label"},"Choose a file\u2026")),r.a.createElement("span",{className:"file-name"},n)))),r.a.createElement("footer",{className:"modal-card-foot"},r.a.createElement("button",{className:"button is-success",onClick:function(){e.setWallet(i,p),e.closeLoginModal()}},"Login"))),r.a.createElement("button",{className:"modal-close is-large","aria-label":"close",onClick:e.closeLoginModal}))},x=function(e){var t=r.a.useState(!1),a=Object(d.a)(t,2),n=a[0],s=a[1],l=r.a.useState(!1),c=Object(d.a)(l,2),i=c[0],o=c[1];return r.a.createElement("nav",{className:"navbar is-light",role:"navigation","aria-label":"main navigation"},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement("a",{className:"navbar-item",onClick:function(t){return e.setTab(0)}},r.a.createElement("strong",{className:"title"},"PermaHub")),r.a.createElement("a",{role:"button",className:"navbar-burger burger","aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample",onClick:function(e){return o(!i)}},r.a.createElement("span",{"aria-hidden":"true"}),r.a.createElement("span",{"aria-hidden":"true"}),r.a.createElement("span",{"aria-hidden":"true"}))),r.a.createElement("div",{id:"navbarBasicExample",className:"navbar-menu "+(i?"is-active":null)},r.a.createElement("div",{className:"navbar-start"},r.a.createElement("a",{className:"navbar-item "+(0===e.tab?"is-active":null),onClick:function(t){return e.setTab(0)}},"Home"),r.a.createElement("a",{className:"navbar-item "+(1===e.tab?"is-active":null),onClick:function(t){return e.setTab(1)}},"My Feeds"),r.a.createElement("a",{className:"navbar-item "+(2===e.tab?"is-active":null),onClick:function(t){return e.setTab(2)}},"Add Feeds")),r.a.createElement("div",{className:"navbar-end"},null===e.wallet?r.a.createElement("div",{className:"navbar-item"},r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{className:"button is-link",onClick:function(){s(!0)}},r.a.createElement("strong",null,"Login")))):r.a.createElement("div",{className:"navbar-item has-dropdown is-hoverable"},r.a.createElement("a",{className:"navbar-link"},r.a.createElement("span",{className:"icon has-text-link"},r.a.createElement("i",{className:"fas fa-circle"})),r.a.createElement("strong",null,e.walletAddress.substr(0,4),"...",e.walletAddress.substr(-4,4))),r.a.createElement("div",{className:"navbar-dropdown"},r.a.createElement("a",{className:"navbar-item",href:"https://viewblock.io/arweave/address/"+e.walletAddress},"Wallet"),r.a.createElement("hr",{className:"navbar-divider"}),r.a.createElement("a",{className:"navbar-item",onClick:e.logout},"Logout"))),r.a.createElement(N,{openLogin:n,closeLoginModal:function(){s(!1)},setWallet:e.setWallet}))))};a(120);var w=function(e){return r.a.createElement("div",{className:"App"},r.a.createElement(x,{setWallet:e.setWallet,wallet:e.wallet,walletAddress:e.walletAddress,logout:e.logout,tab:e.tab,setTab:e.setTab}),e.children)},y=a(78),T=a(12),k=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).handleExampleChange=function(e,t,n){var r=a.state.example;"description"===n?r[t].description=e.target.value:"code"===n&&(r[t].code=e.target.value),a.setState({example:r})},a.addExample=function(){a.setState({example:[].concat(Object(y.a)(a.state.example),[{description:"",code:""}])})},a.setAddress=function(e){a.setState({address:e.target.value})},a.setTag1=function(e){a.setState({tag1:e.target.value})},a.setTag2=function(e){a.setState({tag2:e.target.value})},a.setTitle=function(e){a.setState({title:e.target.value})},a.setDescription=function(e){a.setState({description:e.target.value})},a.submitFeeds=function(){var e=a.state.example.filter((function(e){return""!==e.code&&""!==e.description})),t={address:a.state.address,tagExpr1:a.state.tag1,tagExpr2:a.state.tag2,title:a.state.title,description:a.state.description,example:e};b.postFeed(t,a.props.wallet).then((function(e){console.log(e),a.setState({address:a.props.walletAddress,tag1:"",tag2:"",title:"",description:"",example:[{code:"",description:""}]}),Object(T.toast)({message:"Permafeed posted, wait for it to be mined",type:"is-success",duration:3e3,dismissible:!0,pauseOnHover:!0,closeOnClick:!0,animate:{in:"fadeIn",out:"fadeOut"}})})).catch((function(e){Object(T.toast)({message:"Error in posting permafeed",type:"is-danger",duration:3e3,dismissible:!0,pauseOnHover:!0,closeOnClick:!0,animate:{in:"fadeIn",out:"fadeOut"}})}))},a.state={address:e.walletAddress,tag1:"",tag2:"",title:"",description:"",example:[{code:"",description:""}]},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"columns is-mobile is-centered",style:{marginTop:18}},r.a.createElement("div",{className:"column is-full-mobile is-three-quarters-tablet is-half-desktop is-half-widescreen is-half-fullhd"},r.a.createElement("div",{className:"card has-background-light",style:{padding:12}},r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"has-text-centered"},r.a.createElement("h3",{className:"title"},"Add Feed")),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Address"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",placeholder:"Enter wallet address of your feed",value:this.state.address,onChange:this.setAddress}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Tag"),r.a.createElement("div",{className:"field is-horizontal"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",placeholder:"Enter the tag expr 1",value:this.state.tag1,onChange:this.setTag1})),r.a.createElement("div",{className:"title",style:{marginLeft:18,marginRight:18,marginBottom:8}},":"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",placeholder:"Enter the tag expr 2",value:this.state.tag2,onChange:this.setTag2})))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Title"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",placeholder:"Enter the title of your feed",value:this.state.title,onChange:this.setTitle}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Description"),r.a.createElement("div",{className:"control"},r.a.createElement("textarea",{className:"textarea",placeholder:"Enter the description of your feed",value:this.state.description,onChange:this.setDescription}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",null,r.a.createElement("label",{className:"label",style:{marginBottom:12}},"Example ArQL/GraphQL Code"," ",r.a.createElement("span",null,r.a.createElement("button",{className:"button is-info is-small",style:{marginLeft:18},onClick:this.addExample},"Add Example")))),this.state.example.map((function(t,a){return r.a.createElement("div",{style:{marginBottom:18},key:a},r.a.createElement("label",{className:"label"},"Example ",a+1),r.a.createElement("div",{className:"control",style:{marginBottom:12}},r.a.createElement("input",{className:"input",type:"text",placeholder:"Enter the description for your example",value:t.description,onChange:function(t){return e.handleExampleChange(t,a,"description")}})),r.a.createElement("div",{className:"control"},r.a.createElement("textarea",{className:"textarea",placeholder:"Enter the arql/graphql example to access your feed",value:t.code,onChange:function(t){return e.handleExampleChange(t,a,"code")}})))}))),r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button is-link",disabled:null===this.props.wallet,onClick:this.submitFeeds},"Submit"),null===this.props.wallet?r.a.createElement("span",{className:"has-text-danger is-size-4 has-text-weight-semibold",style:{marginLeft:18}},"Login to submit feed"):null)))))}}]),t}(r.a.Component),O=a(5),A=a.n(O),F=function(e){return r.a.createElement("div",{className:"card",style:{marginBottom:18}},r.a.createElement("div",{className:"card-content"},r.a.createElement("p",{style:{marginBottom:8}},r.a.createElement("strong",null,"Rank:")," ",r.a.createElement("span",{className:"tag is-info"},e.feed.rank)),r.a.createElement("p",{className:"title is-4"},e.feed.title),r.a.createElement("p",{className:"subtitle is-6",style:{marginBottom:8}},A()(e.feed.time).format("MMM Do YYYY, h:mm:ss a")),r.a.createElement("span",{className:"tag is-primary has-text-weight-bold is-medium",style:{marginBottom:16}},e.feed.address.substr(0,4),"...",e.feed.address.substr(-4,4)),r.a.createElement("p",null,e.feed.description),r.a.createElement("nav",{className:"level",style:{marginTop:12}},r.a.createElement("div",{className:"level-item has-text-centered"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-comment"})),r.a.createElement("span",null,e.feed.comments.length)),r.a.createElement("div",{className:"level-item has-text-centered"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-paper-plane"})),r.a.createElement("span",null,Number.parseFloat(b.convertToAr(e.feed.tipAmount))," ","AR")))),r.a.createElement("footer",{className:"card-footer"},r.a.createElement("a",{className:"card-footer-item",onClick:function(t){return e.viewFeed(e.feed.txid)}},"View")))},S=function(e){var t=function(t){e.setTxId(t),e.setTab(3)};return r.a.createElement("div",{className:"container",style:{marginTop:18}},r.a.createElement("nav",{className:"level"},r.a.createElement("div",{className:"level-left"},r.a.createElement("span",{style:{marginRight:18}},r.a.createElement("strong",null,"Search by Title: ")),r.a.createElement("span",null,r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",placeholder:"Search",onChange:function(t){return e.filterAllFeeds(t.target.value)}})))),r.a.createElement("div",{className:"level-right"},r.a.createElement("div",{className:"dropdown is-hoverable"},r.a.createElement("div",{className:"dropdown-trigger"},r.a.createElement("button",{className:"button","aria-haspopup":"true","aria-controls":"dropdown-menu4"},r.a.createElement("span",null,"Sort by"),r.a.createElement("span",{className:"icon is-small"},r.a.createElement("i",{className:"fas fa-angle-down","aria-hidden":"true"})))),r.a.createElement("div",{className:"dropdown-menu",id:"dropdown-menu4",role:"menu"},r.a.createElement("div",{className:"dropdown-content"},r.a.createElement("a",{className:"dropdown-item",onClick:function(t){return e.sortAllFeeds("ranking")}},"Ranking"),r.a.createElement("a",{className:"dropdown-item",onClick:function(t){return e.sortAllFeeds("latest")}},"Latest")))))),0===e.allFeeds.length?r.a.createElement("h2",{className:"title is-4 has-text-centered"},"No Data To Show"):r.a.createElement("div",{className:"columns is-mobile is-centered"},r.a.createElement("div",{className:"column is-half"},e.allFeeds.map((function(e,a){return r.a.createElement(F,{feed:e,viewFeed:t,key:a})})))))},C=function(e){var t=r.a.useState(0),a=Object(d.a)(t,2),n=a[0],s=a[1];return r.a.createElement("div",{className:"modal "+(e.openSendTip?"is-active":null)},r.a.createElement("div",{className:"modal-background"}),r.a.createElement("div",{className:"modal-content"},r.a.createElement("header",{className:"modal-card-head"},r.a.createElement("p",{className:"modal-card-title"},"Send tip"),r.a.createElement("button",{className:"delete","aria-label":"close",onClick:e.closeSendTipModal})),r.a.createElement("section",{className:"modal-card-body"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Send To"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",placeholder:"Enter wallet address of your feed",value:e.sendToAddress,disabled:!0}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Amount"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"number",placeholder:"Enter wallet address of your feed",value:n,onChange:function(e){return s(e.target.value)}})))),r.a.createElement("footer",{className:"modal-card-foot"},r.a.createElement("button",{className:"button is-success",onClick:function(){console.log(e.sendToAddress,n,e.wallet,e.txId),b.sendTip(e.sendToAddress,n,e.wallet,e.txId).then((function(t){console.log(t),e.closeSendTipModal(),Object(T.toast)({message:"Tip sent, wait for it to be mined",type:"is-success",duration:3e3,dismissible:!0,pauseOnHover:!0,closeOnClick:!0,animate:{in:"fadeIn",out:"fadeOut"}})})).catch((function(t){console.error(t),e.closeSendTipModal(),Object(T.toast)({message:"Error in sending tip",type:"is-danger",duration:3e3,dismissible:!0,pauseOnHover:!0,closeOnClick:!0,animate:{in:"fadeIn",out:"fadeOut"}})}))},disabled:null===e.wallet},"Send"),null===e.wallet?r.a.createElement("span",{className:"has-text-danger is-size-5 has-text-weight-semibold",style:{marginLeft:18}},"Login to tip feed"):null)),r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"modal-close is-large","aria-label":"close",onClick:e.closeSendTipModal})))},j=function(e){return r.a.createElement("div",null,r.a.createElement("h1",{className:"title is-4",style:{marginBottom:12}},"Description"),r.a.createElement("p",{style:{marginBottom:18}},void 0!==e.feed?e.feed.description:null),r.a.createElement("h1",{className:"title is-4",style:{marginBottom:12}},"ArQL/GraphQL Example Code"),void 0!==e.feed?e.feed.example.map((function(e,t){return r.a.createElement("div",{style:{marginBottom:12},key:t},r.a.createElement("p",null,r.a.createElement("span",{className:"has-text-weight-bold"},t+1,". "),e.description),r.a.createElement("pre",null,r.a.createElement("code",null,e.code)))})):null)},I=a(76),B=function(e){return r.a.createElement("div",null,e.loading?r.a.createElement("div",{className:"has-text-centered"},r.a.createElement("div",{className:"lds-ring"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))," "):0===e.feedItems.length?r.a.createElement("h2",{className:"title"},"No Data To Show"):r.a.createElement("div",null,r.a.createElement("nav",{className:"level"},r.a.createElement("div",{className:"level-item has-text-centered"},r.a.createElement("div",{className:"card has-background-light",style:{padding:12}},r.a.createElement("div",{className:"card-content"},r.a.createElement("p",{className:"heading"},"Number of Data Item"),r.a.createElement("p",{className:"title"},e.feedItems.length)))),r.a.createElement("div",{className:"level-item has-text-centered"},r.a.createElement("div",{className:"card has-background-light",style:{padding:12}},r.a.createElement("div",{className:"card-content"},r.a.createElement("p",{className:"heading"},"First Post Time"),r.a.createElement("p",{className:"title is-4"},0===e.feedItems.length?"":A.a.unix(e.feedItems[0].timestamp).format("MMM Do YYYY")),r.a.createElement("p",{className:"title is-4"},0===e.feedItems.length?"":A.a.unix(e.feedItems[0].timestamp).format("h:mm:ss a"))))),r.a.createElement("div",{className:"level-item has-text-centered"},r.a.createElement("div",{className:"card has-background-light",style:{padding:12}},r.a.createElement("div",{className:"card-content"},r.a.createElement("p",{className:"heading"},"Last Post Time"),r.a.createElement("p",{className:"title is-4"},0===e.feedItems.length?"":A.a.unix(e.feedItems[e.feedItems.length-1].timestamp).format("MMM Do YYYY")),r.a.createElement("p",{className:"title is-4"},0===e.feedItems.length?"":A.a.unix(e.feedItems[e.feedItems.length-1].timestamp).format("h:mm:ss a")))))),r.a.createElement("div",{className:"columns is-mobile is-centered",style:{marginTop:18}},r.a.createElement("div",{className:"column is-full-mobile is-three-quarters-tablet is-three-quarters-desktop is-three-quarters-widescreen is-three-quarters-fullhd"},r.a.createElement("div",{className:"card has-background-light",style:{padding:12}},r.a.createElement("div",{className:"card-content"},void 0!==e.chartData?r.a.createElement(I.a,{data:e.chartData,height:100,width:300}):""))))))},Y=a(47),q=a(46),M=a.n(q),D=function(e){var t=r.a.useState({}),a=Object(d.a)(t,2),n=a[0],s=a[1],l=r.a.useState({}),c=Object(d.a)(l,2),i=c[0],o=c[1],m=r.a.useState(!1),u=Object(d.a)(m,2),p=u[0],f=u[1],h=r.a.useState(!0),v=Object(d.a)(h,2),E=v[0],g=v[1];return r.a.createElement("div",null,r.a.createElement("h1",{className:"title is-4",style:{marginBottom:12}},"Run Test ArQL Query"),r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column"},r.a.createElement("h1",{className:"title is-5",style:{marginBottom:12}},"Request"),r.a.createElement(Y.a,{id:"a_unique_id",placeholder:n,theme:"light_mitsuketa_tribute",locale:M.a,onChange:function(e){e.error?g(!1):(g(!0),s(e.jsObject))}}),r.a.createElement("div",{style:{marginTop:18}},r.a.createElement("button",{className:"button is-link",onClick:function(){f(!0),b.runQuery(n).then((function(e){o(e.splice(0,5)),f(!1)}))},disabled:p||!E},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-play"})),r.a.createElement("span",null,"Run")))),r.a.createElement("div",{className:"column"},r.a.createElement("h1",{className:"title is-5",style:{marginBottom:12}},"Response"),r.a.createElement(Y.a,{id:"a_unique_id_1",placeholder:i,theme:"light_mitsuketa_tribute",locale:M.a,viewOnly:!0}))))},L=function(e){var t=r.a.useState(""),a=Object(d.a)(t,2),n=a[0],s=a[1],l=r.a.useState(!1),c=Object(d.a)(l,2),i=c[0],o=c[1];return r.a.createElement("div",null,r.a.createElement("div",{className:"columns is-mobile is-centered"},r.a.createElement("div",{className:"column is-full-mobile is-three-quarters-tablet is-half-desktop is-half-widescreen is-half-fullhd"},void 0!==e.feed&&0!==e.feed.comments.length?e.feed.comments.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("div",null,r.a.createElement("strong",null,e.owner)),r.a.createElement("div",{className:"has-text-grey-light is-size-6"},A()(e.time).fromNow()),r.a.createElement("div",{style:{marginTop:8}},e.comment),r.a.createElement("hr",{style:{marginTop:12,marginBottom:18}}))})):null,r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("textarea",{className:"textarea",placeholder:"Comment here",value:n,onChange:function(e){return s(e.target.value)}}))),r.a.createElement("div",{className:"has-text-right"},r.a.createElement("button",{className:"button is-link",disabled:void 0===e.feed||i||null===e.wallet,onClick:function(){o(!0),b.commentFeed({comment:n},e.wallet,e.feed.txid).then((function(e){s(""),o(!1),console.log(e),Object(T.toast)({message:"Comment posted, wait for it to be mined",type:"is-success",duration:3e3,dismissible:!0,pauseOnHover:!0,closeOnClick:!0,animate:{in:"fadeIn",out:"fadeOut"}})})).catch((function(e){Object(T.toast)({message:"Error in commenting",type:"is-danger",duration:3e3,dismissible:!0,pauseOnHover:!0,closeOnClick:!0,animate:{in:"fadeIn",out:"fadeOut"}})}))}},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-comment"})),r.a.createElement("span",null,"Comment"))))))},W=function(e){return r.a.createElement("div",null,r.a.createElement("div",{className:"columns is-mobile is-centered"},r.a.createElement("div",{className:"column is-full-mobile is-three-quarters-tablet is-half-desktop is-half-widescreen is-half-fullhd"},void 0!==e.feed?0!==e.feed.tips.length?e.feed.tips.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("div",null,r.a.createElement("strong",null,e.owner)),r.a.createElement("div",{className:"has-text-grey-light is-size-6"},A.a.unix(e.time).fromNow()),r.a.createElement("div",{style:{marginTop:8}},r.a.createElement("strong",null,"Amount:")," ",Number.parseFloat(b.convertToAr(e.amount))," AR"),r.a.createElement("hr",{style:{marginTop:12,marginBottom:18}}))})):r.a.createElement("h2",{className:"title is-5"},"No Tips Given"):null)))},H=function(e){var t=r.a.useState([]),a=Object(d.a)(t,2),n=a[0],s=a[1],l=r.a.useState(),c=Object(d.a)(l,2),i=c[0],o=c[1],m=r.a.useState(!1),u=Object(d.a)(m,2),p=u[0],f=u[1],h=r.a.useState(0),v=Object(d.a)(h,2),E=v[0],g=v[1],N=r.a.useState(),x=Object(d.a)(N,2),w=x[0],y=x[1],T=r.a.useState(!0),k=Object(d.a)(T,2),O=k[0],F=k[1];r.a.useEffect((function(){var t=e.allFeeds.filter((function(t){return t.txid===e.txid}))[0];console.log(t),void 0!==t&&(o(t),b.getFeedDetails(t.tagExpr1,t.tagExpr2,t.address).then((function(e){var t=e.sort((function(e,t){return e.timestamp-t.timestamp}));s(t),console.log(t);var a=t.map((function(e){return A.a.unix(e.timestamp).format("MMM Do YYYY")})).filter((function(e,t,a){return a.indexOf(e)===t}));console.log(a);var n=a.map((function(e){return t.filter((function(t){return A.a.unix(t.timestamp).format("MMM Do YYYY")===e})).length}));console.log(n),y({labels:a,datasets:[{label:"No. of Feed By Date",fill:!1,lineTension:.1,backgroundColor:"rgba(75,192,192,0.4)",borderColor:"rgba(75,192,192,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgba(75,192,192,1)",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(75,192,192,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:n}]}),F(!1)})))}),[e.allFeeds]);var S=function(e){g(e)};return r.a.createElement("div",null,r.a.createElement("section",{className:"hero is-medium is-primary is-bold"},r.a.createElement("div",{className:"hero-body"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"title"},void 0!==i?i.title:""),r.a.createElement("h2",{className:"subtitle is-6"},void 0!==i?A()(i.time).format("MMM Do YYYY, h:mm:ss a"):""),r.a.createElement("h2",{className:"subtitle",style:{marginBottom:4}},void 0!==i?i.address:""),r.a.createElement("button",{className:"button is-link",onClick:function(){f(!0)}},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-paper-plane"})),r.a.createElement("span",null,"Send Tip")),r.a.createElement(C,{openSendTip:p,closeSendTipModal:function(){f(!1)},sendToAddress:void 0!==i?i.address:"",wallet:e.wallet,txId:void 0!==i?i.txid:""}))),r.a.createElement("div",{className:"hero-foot"},r.a.createElement("nav",{className:"tabs is-boxed is-fullwidth"},r.a.createElement("div",{className:"container"},r.a.createElement("ul",null,r.a.createElement("li",{className:0===E?"is-active":""},r.a.createElement("a",{onClick:function(e){return S(0)}},"Details")),r.a.createElement("li",{className:1===E?"is-active":""},r.a.createElement("a",{onClick:function(e){return S(1)}},"Statistic")),r.a.createElement("li",{className:2===E?"is-active":""},r.a.createElement("a",{onClick:function(e){return S(2)}},"Test Query")),r.a.createElement("li",{className:3===E?"is-active":""},r.a.createElement("a",{onClick:function(e){return S(3)}},"Comments")),r.a.createElement("li",{className:4===E?"is-active":""},r.a.createElement("a",{onClick:function(e){return S(4)}},"Tips"))))))),r.a.createElement("div",{className:"container",style:{padding:18}},0===E?r.a.createElement(j,{feed:i}):null,1===E?r.a.createElement(B,{feedItems:n,chartData:w,loading:O}):null,2===E?r.a.createElement(D,{feed:i}):null,3===E?r.a.createElement(L,{wallet:e.wallet,feed:i}):null,4===E?r.a.createElement(W,{feed:i}):null))},P=function(e){var t=function(t){e.setTxId(t),e.setTab(3)};return r.a.createElement("div",{className:"container",style:{marginTop:18}},r.a.createElement("nav",{className:"level"},r.a.createElement("div",{className:"level-left"},r.a.createElement("span",{style:{marginRight:18}},r.a.createElement("strong",null,"Search by Title: ")),r.a.createElement("span",null,r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",placeholder:"Search",onChange:function(t){return e.filterYourFeeds(t.target.value)}})))),r.a.createElement("div",{className:"level-right"},r.a.createElement("div",{className:"dropdown is-hoverable"},r.a.createElement("div",{className:"dropdown-trigger"},r.a.createElement("button",{className:"button","aria-haspopup":"true","aria-controls":"dropdown-menu4"},r.a.createElement("span",null,"Sort by"),r.a.createElement("span",{className:"icon is-small"},r.a.createElement("i",{className:"fas fa-angle-down","aria-hidden":"true"})))),r.a.createElement("div",{className:"dropdown-menu",id:"dropdown-menu4",role:"menu"},r.a.createElement("div",{className:"dropdown-content"},r.a.createElement("a",{className:"dropdown-item",onClick:function(t){return e.sortYourFeeds("ranking")}},"Ranking"),r.a.createElement("a",{className:"dropdown-item",onClick:function(t){return e.sortYourFeeds("latest")}},"Latest")))))),0===e.yourFeeds.length?r.a.createElement("h2",{className:"title is-4 has-text-centered"},"No Data To Show"):r.a.createElement("div",{className:"columns is-mobile is-centered"},r.a.createElement("div",{className:"column is-half"},e.yourFeeds.map((function(e,a){return r.a.createElement(F,{feed:e,viewFeed:t,key:a})})))))},R=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).setWallet=function(e,t){sessionStorage.setItem("wallet",JSON.stringify(e)),sessionStorage.setItem("walletAddress",t),a.setState({wallet:e,walletAddress:t},(function(){a.getMyFeeds()}))},a.logout=function(){sessionStorage.removeItem("wallet"),sessionStorage.removeItem("walletAddress"),a.setState({wallet:null,walletAmount:0,walletAddress:"",yourFeeds:[]})},a.getMyFeeds=function(){null!==a.state.wallet&&b.getYourFeeds(a.state.walletAddress).then((function(e){a.setState({yourFeeds:e,filterYourFeeds:e})}))},a.getAllFeeds=function(){b.getAllFeeds().then((function(e){a.setState({allFeeds:e,filterAllFeeds:e}),console.log(e)}))},a.sortAllFeeds=function(e){var t=a.state.allFeeds;if("ranking"===e){var n=t.sort((function(e,t){return e.rank-t.rank}));a.setState({allFeeds:n,filterAllFeeds:n})}else if("latest"===e){var r=t.sort((function(e,t){return t.time-e.time}));a.setState({allFeeds:r,filterAllFeeds:r})}},a.filterAllFeeds=function(e){var t=a.state.allFeeds.filter((function(t){return-1!==t.title.toLowerCase().indexOf(e.toLowerCase())}));a.setState({filterAllFeeds:t})},a.sortYourFeeds=function(e){var t=a.state.yourFeeds;if("ranking"===e){var n=t.sort((function(e,t){return e.rank-t.rank}));a.setState({yourFeeds:n,filterYourFeeds:n})}else if("latest"===e){var r=t.sort((function(e,t){return t.time-e.time}));a.setState({yourFeeds:r,filterYourFeeds:r})}},a.filterYourFeeds=function(e){var t=a.state.yourFeeds.filter((function(t){return-1!==t.title.toLowerCase().indexOf(e.toLowerCase())}));a.setState({filterYourFeeds:t})},a.setTab=function(e){a.setState({tab:e})},a.setTxId=function(e){a.setState({txid:e})},a.state={wallet:null===sessionStorage.getItem("wallet")?null:JSON.parse(sessionStorage.getItem("wallet")),walletAddress:null===sessionStorage.getItem("walletAddress")?"":sessionStorage.getItem("walletAddress"),allFeeds:[],filterAllFeeds:[],yourFeeds:[],filterYourFeeds:[],tab:0,txid:""},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.getAllFeeds(),this.getMyFeeds()}},{key:"render",value:function(){return n.createElement(w,{wallet:this.state.wallet,walletAddress:this.state.walletAddress,setWallet:this.setWallet,logout:this.logout,setTab:this.setTab,tab:this.state.tab},0===this.state.tab?n.createElement(S,{wallet:this.state.wallet,walletAddress:this.state.walletAddress,allFeeds:this.state.filterAllFeeds,sortAllFeeds:this.sortAllFeeds,filterAllFeeds:this.filterAllFeeds,setTab:this.setTab,setTxId:this.setTxId}):null,1===this.state.tab?n.createElement(P,{wallet:this.state.wallet,walletAddress:this.state.walletAddress,yourFeeds:this.state.filterYourFeeds,sortYourFeeds:this.sortYourFeeds,filterYourFeeds:this.filterYourFeeds,setTab:this.setTab,setTxId:this.setTxId}):null,2===this.state.tab?n.createElement(k,{wallet:this.state.wallet,walletAddress:this.state.walletAddress}):null,3===this.state.tab?n.createElement(H,{wallet:this.state.wallet,walletAddress:this.state.walletAddress,allFeeds:this.state.allFeeds,txid:this.state.txid}):null)}}]),t}(n.Component);a(214);l.a.render(r.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},79:function(e,t,a){e.exports=a(215)},84:function(e,t,a){}},[[79,1,2]]]);
//# sourceMappingURL=main.4d39d151.chunk.js.map